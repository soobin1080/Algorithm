package 문자열;

import java.util.Scanner;

public class bj_1018 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub

		Scanner sc = new Scanner(System.in);

		int N = sc.nextInt();
		int M = sc.nextInt();

		char arr[][] = new char[M][N];

		for (int i = 0; i < M; i++) {
			arr[i] = sc.next().toCharArray();
		}

		int min = 0;
		for (int i = 0; i < M - 8; i++) {
			for (int j = 0; j < N - 8; j++) {
				// 검사
				char now = arr[i][j];
				int count = 0;
				for (int k = i; k < i + 8; k++) {
					for (int l = j; l < j + 8; l++) {
						System.out.print(now+" ");
						if (now != arr[k][l]) {
							count++;
						}

						if (l != j + 7) {

							if (now == 'W') {
								now = 'B';
							} else {
								now = 'W';
							}
						}
					}
					System.out.println();
				}
				
				if(min>count) {
					min=count;
				}
			}
		}
		
		System.out.println(min);
	}

}
